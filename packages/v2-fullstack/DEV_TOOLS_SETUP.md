# å¼€å‘å·¥å…·é…ç½®æŒ‡å—

**æ›´æ–°æ—¥æœŸ**ï¼š2025-01-27

## ğŸš€ å¿«é€Ÿè‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰

**å¥½æ¶ˆæ¯**ï¼šæ‰€æœ‰å¼€å‘å·¥å…·çš„è¿æ¥é…ç½®éƒ½å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œè‡ªåŠ¨å®Œæˆï¼

### ä¸€é”®è‡ªåŠ¨é…ç½®

è¿è¡Œè‡ªåŠ¨åŒ–é…ç½®è„šæœ¬ï¼Œè‡ªåŠ¨é…ç½®æ‰€æœ‰å·¥å…·çš„è¿æ¥ä¿¡æ¯ï¼š

```bash
cd packages/v2-fullstack
./setup-dev-tools.sh
```

**è„šæœ¬åŠŸèƒ½**ï¼š
- âœ… **DBeaver**ï¼šè‡ªåŠ¨åˆ›å»º PostgreSQL æ•°æ®åº“è¿æ¥
- âœ… **RedisInsight**ï¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼ˆéœ€é‡å¯åº”ç”¨ç”Ÿæ•ˆï¼‰
- âœ… **Postman**ï¼šè‡ªåŠ¨ç”Ÿæˆç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼ˆéœ€æ‰‹åŠ¨å¯¼å…¥ï¼‰

**é…ç½®ä¿¡æ¯**ï¼ˆä» `docker-compose.yml` è‡ªåŠ¨è¯»å–ï¼‰ï¼š
- PostgreSQL: `igloo_index@localhost:5432` (ç”¨æˆ·: `igloo`, å¯†ç : `igloo_dev`)
- Redis: `localhost:6379`
- API Base URL: `http://localhost:8000`

#### è„šæœ¬è¿è¡Œæ—¶æœº

**å¿…é¡»è¿è¡Œçš„æƒ…å†µ**ï¼ˆé¦–æ¬¡é…ç½®ï¼‰ï¼š
- âœ… **æ–°æœºå™¨/æ–°ç¯å¢ƒ**ï¼šåœ¨æ–°ç”µè„‘æˆ–æ–°å¼€å‘ç¯å¢ƒä¸­é¦–æ¬¡è®¾ç½®
- âœ… **é¦–æ¬¡å®‰è£…å·¥å…·å**ï¼šåˆšå®‰è£…å®Œ DBeaverã€Postmanã€RedisInsight å
- âœ… **é…ç½®æ–‡ä»¶ä¸¢å¤±**ï¼šé…ç½®æ–‡ä»¶è¢«æ„å¤–åˆ é™¤æˆ–æŸå
- âœ… **æ–°å›¢é˜Ÿæˆå‘˜åŠ å…¥**ï¼šåœ¨æ–°æœºå™¨ä¸Šåˆå§‹åŒ–é…ç½®

**å»ºè®®è¿è¡Œçš„æƒ…å†µ**ï¼ˆé…ç½®æ›´æ–°ï¼‰ï¼š
- ğŸ”„ **æ•°æ®åº“é…ç½®å˜æ›´**ï¼šä¿®æ”¹äº† `docker-compose.yml` ä¸­çš„æ•°æ®åº“é…ç½®ï¼ˆç«¯å£ã€ç”¨æˆ·åã€å¯†ç ã€æ•°æ®åº“åç­‰ï¼‰
- ğŸ”„ **å·¥å…·é‡æ–°å®‰è£…**ï¼šé‡æ–°å®‰è£…äº†å¼€å‘å·¥å…·å

**ä¸éœ€è¦è¿è¡Œçš„æƒ…å†µ**ï¼š
- âŒ **é…ç½®å·²ç»å®Œæˆä¸”æ­£å¸¸å·¥ä½œ**ï¼šé…ç½®ä¸ä¼šè‡ªåŠ¨å¤±æ•ˆ
- âŒ **æ—¥å¸¸å¼€å‘ä½¿ç”¨**ï¼šé…ç½®æ–‡ä»¶å·²å­˜åœ¨ä¸”é…ç½®æ­£ç¡®

**è¿è¡Œæ—¶æœºæ€»ç»“**ï¼š

| åœºæ™¯ | æ˜¯å¦éœ€è¦è¿è¡Œ | è¯´æ˜ |
|------|------------|------|
| é¦–æ¬¡è®¾ç½®å¼€å‘ç¯å¢ƒ | âœ… å¿…é¡» | åˆ›å»ºæ‰€æœ‰åˆå§‹é…ç½® |
| ä¿®æ”¹æ•°æ®åº“é…ç½® | âœ… å»ºè®® | æ›´æ–°é…ç½®æ–‡ä»¶ä»¥åŒ¹é…æ–°é…ç½® |
| é…ç½®æ–‡ä»¶ä¸¢å¤± | âœ… å¿…é¡» | é‡æ–°ç”Ÿæˆé…ç½®æ–‡ä»¶ |
| æ—¥å¸¸å¼€å‘ä½¿ç”¨ | âŒ ä¸éœ€è¦ | é…ç½®å·²å­˜åœ¨ä¸”æ­£å¸¸ |
| å·¥å…·é‡æ–°å®‰è£… | âœ… å»ºè®® | ç¡®ä¿é…ç½®æ­£ç¡® |
| æ–°å›¢é˜Ÿæˆå‘˜åŠ å…¥ | âœ… å¿…é¡» | åœ¨æ–°æœºå™¨ä¸Šåˆå§‹åŒ–é…ç½® |

**æ€»ç»“**ï¼šè„šæœ¬ä¸»è¦ç”¨äºåˆå§‹åŒ–é…ç½®å’Œé…ç½®æ›´æ–°ï¼Œä¸æ˜¯æ¯æ¬¡å¼€å‘éƒ½éœ€è¦è¿è¡Œã€‚

### é…ç½®åçš„æ“ä½œ

1. **DBeaver**ï¼š
   - å¦‚æœå‘½ä»¤è¡Œé…ç½®æˆåŠŸï¼Œè¿æ¥ä¼šè‡ªåŠ¨åˆ›å»º
   - å¦‚æœå¤±è´¥ï¼Œè„šæœ¬ä¼šæ˜¾ç¤ºæ‰‹åŠ¨é…ç½®æ­¥éª¤

2. **RedisInsight**ï¼š
   - é…ç½®æ–‡ä»¶å·²ç”Ÿæˆåœ¨ `~/.redisinsight/databases.json`
   - **éœ€è¦é‡å¯ RedisInsight** æ‰èƒ½ç”Ÿæ•ˆï¼š
     ```bash
     killall "Redis Insight" 2>/dev/null; open -a "Redis Insight"
     ```

3. **Postman**ï¼š
   - ç¯å¢ƒé…ç½®æ–‡ä»¶å·²ç”Ÿæˆåœ¨ `~/.postman/igloo-local-development.json`
   - **éœ€è¦æ‰‹åŠ¨å¯¼å…¥**ï¼ˆä»…é¦–æ¬¡ï¼‰ï¼š
     - æ‰“å¼€ Postman â†’ Environments â†’ Import
     - é€‰æ‹©æ–‡ä»¶ï¼š`~/.postman/igloo-local-development.json`
   - **å¯¼å…¥è¯´æ˜**ï¼š
     - âœ… **ä¸€æ¬¡æ€§å¯¼å…¥**ï¼šå¯¼å…¥åï¼Œç¯å¢ƒä¼šä¿å­˜åœ¨ Postman çš„æœ¬åœ°æ•°æ®åº“ä¸­ï¼Œä¹‹åå¯ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€é‡å¤å¯¼å…¥
     - âœ… **é¦–æ¬¡**ï¼šè¿è¡Œè„šæœ¬åï¼Œåœ¨ Postman GUI ä¸­å¯¼å…¥ä¸€æ¬¡ç¯å¢ƒé…ç½®æ–‡ä»¶
     - âœ… **ä¹‹å**ï¼šç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€é‡å¤å¯¼å…¥
     - ğŸ”„ **é‡æ–°å¯¼å…¥çš„æƒ…å†µ**ï¼š
       - ä¿®æ”¹äº† `docker-compose.yml` ä¸­çš„æ•°æ®åº“é…ç½®ï¼ˆç«¯å£ã€ç”¨æˆ·åç­‰ï¼‰
       - é…ç½®æ–‡ä»¶è¢«åˆ é™¤æˆ–æŸå
       - éœ€è¦æ›´æ–°ç¯å¢ƒå˜é‡å€¼
     - ğŸ’¡ **å»ºè®®**ï¼šé¦–æ¬¡å¯¼å…¥åï¼Œå¦‚éœ€æ›´æ–°ï¼Œå¯ç›´æ¥åœ¨ Postman ä¸­æ‰‹åŠ¨ç¼–è¾‘ç¯å¢ƒå˜é‡ï¼Œæ— éœ€é‡æ–°å¯¼å…¥

---

## ğŸ“ æ‰‹åŠ¨é…ç½®æŒ‡å—ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰

å¦‚æœè‡ªåŠ¨é…ç½®å¤±è´¥ï¼Œæˆ–éœ€è¦è‡ªå®šä¹‰é…ç½®ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨é…ç½®ï¼š

## âœ… å·²å®‰è£…çš„å¼€å‘å·¥å…·

### 1. æ•°æ®åº“ç®¡ç†å·¥å…·ï¼šDBeaver Community Edition âœ…

**å®‰è£…çŠ¶æ€**ï¼šå·²å®‰è£…  
**ç‰ˆæœ¬**ï¼š25.3.2  
**ä½ç½®**ï¼š`/Applications/DBeaver.app`  
**å‘½ä»¤è¡Œå·¥å…·**ï¼š`dbeaver`ï¼ˆå·²æ·»åŠ åˆ° PATHï¼‰

#### è¿æ¥ PostgreSQL æ•°æ®åº“

1. **å¯åŠ¨ DBeaver**ï¼š
   ```bash
   open -a DBeaver
   # æˆ–ä½¿ç”¨å‘½ä»¤è¡Œ
   dbeaver
   ```

2. **åˆ›å»ºæ–°è¿æ¥**ï¼š
   - ç‚¹å‡» "New Database Connection" æˆ–æŒ‰ `Cmd+Shift+N`
   - é€‰æ‹© "PostgreSQL"
   - å¡«å†™è¿æ¥ä¿¡æ¯ï¼š
     - **Host**: `localhost`
     - **Port**: `5432`
     - **Database**: `igloo_index`
     - **Username**: `igloo`
     - **Password**: `igloo_dev`
   - ç‚¹å‡» "Test Connection" éªŒè¯è¿æ¥
   - ç‚¹å‡» "Finish" ä¿å­˜è¿æ¥

3. **å…³äº PostGIS æ‰©å±•**ï¼š
   - âš ï¸ **æ³¨æ„**ï¼šå½“å‰ä½¿ç”¨ PostgreSQL 14.7ï¼Œä¸å®‰è£… PostGIS æ‰©å±•
   - é¡¹ç›®å°†ä¸ä½¿ç”¨ PostGIS åŠŸèƒ½

#### ä½¿ç”¨æŠ€å·§

- **å¿«æ·é”®**ï¼š`Cmd+Enter` æ‰§è¡Œ SQL æŸ¥è¯¢
- **æ•°æ®å¯¼å‡º**ï¼šå³é”®è¡¨ â†’ "Export Data" â†’ é€‰æ‹©æ ¼å¼ï¼ˆCSV, JSON, Excel ç­‰ï¼‰
- **ER å›¾**ï¼šå³é”®æ•°æ®åº“ â†’ "View Diagram" æŸ¥çœ‹è¡¨å…³ç³»å›¾

---

### 2. API æµ‹è¯•å·¥å…·ï¼šPostman âœ…

**å®‰è£…çŠ¶æ€**ï¼šå·²å®‰è£…  
**æ¡Œé¢åº”ç”¨ç‰ˆæœ¬**ï¼š11.80.0  
**CLI ç‰ˆæœ¬**ï¼š1.28.0  
**ä½ç½®**ï¼š`/Applications/Postman.app`  
**å‘½ä»¤è¡Œå·¥å…·**ï¼š`postman`ï¼ˆå·²æ·»åŠ åˆ° PATHï¼‰

#### å¯åŠ¨ Postman

```bash
open -a Postman
# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œ
postman
```

#### é…ç½® API æµ‹è¯•

1. **åˆ›å»ºæ–°è¯·æ±‚**ï¼š
   - ç‚¹å‡» "New" â†’ "HTTP Request"
   - è®¾ç½®è¯·æ±‚æ–¹æ³•ï¼ˆGET, POST, PUT, DELETE ç­‰ï¼‰
   - è¾“å…¥ API åœ°å€ï¼ˆä¾‹å¦‚ï¼š`http://localhost:8000/api/v1/health`ï¼‰

2. **é…ç½®ç¯å¢ƒå˜é‡**ï¼ˆæ¨èï¼‰ï¼š
   - ç‚¹å‡»å³ä¸Šè§’ "Environments" â†’ "Add"
   - åˆ›å»ºç¯å¢ƒï¼ˆä¾‹å¦‚ï¼š`Local Development`ï¼‰
   - æ·»åŠ å˜é‡ï¼š
     - `base_url`: `http://localhost:8000`
     - `api_key`: `your_api_key_here`
   - åœ¨è¯·æ±‚ä¸­ä½¿ç”¨ï¼š`{{base_url}}/api/v1/health`

3. **æµ‹è¯• FastAPI åº”ç”¨**ï¼š
   ```http
   GET http://localhost:8000/
   GET http://localhost:8000/health
   ```

#### Postman CLI ä½¿ç”¨

```bash
# è¿è¡Œ Collection
postman collection run <collection_id>

# å¯¼å‡º Collection
postman collection export <collection_id>
```

---

### 3. Redis å®¢æˆ·ç«¯ï¼šRedisInsight âœ…

**å®‰è£…çŠ¶æ€**ï¼šå·²å®‰è£…  
**ç‰ˆæœ¬**ï¼š2.70.1  
**ä½ç½®**ï¼š`/Applications/Redis Insight.app`

#### è¿æ¥ Redis æœåŠ¡å™¨

1. **å¯åŠ¨ RedisInsight**ï¼š
   ```bash
   open -a "Redis Insight"
   ```

2. **æ·»åŠ æ•°æ®åº“è¿æ¥**ï¼š
   - ç‚¹å‡» "Add Redis Database"
   - é€‰æ‹© "Add Database Manually"
   - å¡«å†™è¿æ¥ä¿¡æ¯ï¼š
     - **Host**: `localhost`
     - **Port**: `6379`
     - **Database Alias**: `Igloo Local Redis`
   - ç‚¹å‡» "Add Redis Database"

3. **éªŒè¯è¿æ¥**ï¼š
   - è¿æ¥æˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ° Redis æ•°æ®åº“çš„é”®å€¼å¯¹
   - å¯ä»¥æµè§ˆã€æœç´¢ã€ç¼–è¾‘é”®å€¼

#### ä½¿ç”¨åŠŸèƒ½

- **æµè§ˆé”®**ï¼šæŸ¥çœ‹æ‰€æœ‰ Redis é”®
- **æœç´¢**ï¼šä½¿ç”¨æœç´¢åŠŸèƒ½æŸ¥æ‰¾ç‰¹å®šé”®
- **ç¼–è¾‘å€¼**ï¼šç›´æ¥ç¼–è¾‘å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€é›†åˆç­‰
- **ç›‘æ§**ï¼šæŸ¥çœ‹ Redis æ€§èƒ½æŒ‡æ ‡
- **æ‰§è¡Œå‘½ä»¤**ï¼šåœ¨ CLI ä¸­æ‰§è¡Œ Redis å‘½ä»¤

#### å¸¸ç”¨ Redis å‘½ä»¤æµ‹è¯•

```bash
# ä½¿ç”¨ redis-cliï¼ˆå·²åŒ…å«åœ¨ Redis å®‰è£…ä¸­ï¼‰
docker compose exec redis redis-cli

# æµ‹è¯•è¿æ¥
PING

# æŸ¥çœ‹æ‰€æœ‰é”®
KEYS *

# è®¾ç½®å’Œè·å–å€¼
SET test_key "Hello Redis"
GET test_key
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨è„šæœ¬

### å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
# å¯åŠ¨ Docker æœåŠ¡
cd packages/v2-fullstack
docker compose up -d

# è‡ªåŠ¨é…ç½®å¼€å‘å·¥å…·è¿æ¥ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
./setup-dev-tools.sh

# å¯åŠ¨å¼€å‘å·¥å…·ï¼ˆå¯é€‰ï¼‰
open -a DBeaver
open -a Postman
open -a "Redis Insight"
```

### éªŒè¯æœåŠ¡è¿æ¥

```bash
# éªŒè¯ PostgreSQL
docker compose exec postgres psql -U igloo -d igloo_index -c "SELECT version();"

# éªŒè¯ Redis
docker compose exec redis redis-cli ping

# éªŒè¯ FastAPIï¼ˆå¦‚æœå·²å¯åŠ¨ï¼‰
curl http://localhost:8000/health
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“è¿æ¥**ï¼š
   - ç¡®ä¿ Docker æœåŠ¡æ­£åœ¨è¿è¡Œï¼š`docker compose ps`
   - å¦‚æœè¿æ¥å¤±è´¥ï¼Œæ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š`docker compose logs postgres`

2. **Redis è¿æ¥**ï¼š
   - ç¡®ä¿ Redis æœåŠ¡æ­£åœ¨è¿è¡Œï¼š`docker compose ps`
   - é»˜è®¤æ— å¯†ç ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦é…ç½®å¯†ç 

3. **API æµ‹è¯•**ï¼š
   - FastAPI é»˜è®¤è¿è¡Œåœ¨ `http://localhost:8000`
   - ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨ï¼š`cd backend && uvicorn app.main:app --reload`

4. **å·¥å…·æ›´æ–°**ï¼š
   ```bash
   # æ›´æ–°æ‰€æœ‰å·¥å…·
   brew upgrade --cask dbeaver-community postman redis-insight
   
   # æ›´æ–° Postman CLI
   curl -o- "https://dl-cli.pstmn.io/install/osx_64.sh" | sh
   ```

---

## ğŸ‰ å¼€å‘å·¥å…·å®‰è£…å®Œæˆï¼

æ‰€æœ‰å¼€å‘å·¥å…·å·²æˆåŠŸå®‰è£…å¹¶é…ç½®ã€‚ç°åœ¨å¯ä»¥ï¼š
- âœ… ä½¿ç”¨ DBeaver ç®¡ç† PostgreSQL æ•°æ®åº“
- âœ… ä½¿ç”¨ Postman æµ‹è¯• API æ¥å£
- âœ… ä½¿ç”¨ RedisInsight ç®¡ç† Redis æ•°æ®

**ä¸‹ä¸€æ­¥**ï¼šå¼€å§‹å®é™…å¼€å‘å·¥ä½œï¼
