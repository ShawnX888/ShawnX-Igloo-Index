# Index Insurance 门户网站设计

打造一个 index insurance 的门户网站，UI 风格参考 Google Maps Platform 和 Apple App Store。

网站的页面包含：降雨和风险（首页），保险产品介绍页。

## 降雨和风险（首页）的设计

### 目标

可视化历史和预测的降雨量，以及风险事件和保险产品的运行原理。

### 页面结构

页面竖直地分为 2 个部分。

### 第一部分：自定义地图

#### 地图基础

- 基于 Google 的 Maps JavaScript API 打造自定义地图
- 在 base map 的基础上，额外叠加多个图层

#### 图层设计

**图层 1：历史降雨量热力图**

- 以半透明 heatmap 的形式展示行政区的历史降雨量
- 展示以"市/区"级别划分行政区域边界
- 区域内降雨量越大，颜色越深
- 同一区域的颜色晕染为：从中心往边界的逐渐变浅
- 当用户选择查看"历史降雨量"时，默认加载该图层

**图层 2：预测降雨量热力图**

- 以半透明 heatmap 的形式展示行政区的预测降雨量
- 展示以"市/区"级别划分行政区域边界
- 区域内降雨量越大，颜色越深
- 同一区域的颜色晕染为：从中心往边界的逐渐变浅
- 当用户选择查看"预测降雨量"时，默认加载该图层

**图层 3：历史风险事件**

- 在图层 1 和 2 上方，基于历史降雨量，叠加展示已触发的风险事件的数量
- 在行政区中心上方，以半透明圆形染色区来代表风险事件数量
- 数量越多，圆形色块的面积越大，颜色越深
- 显示上引入动画效果：以一种风险从无到有的态势反复播放
- 对于选中的"市/区"，需要在染色区中心显示事件数量
- 当用户选择查看"历史降雨量"时，默认加载该图层

**图层 4：预测风险事件**

- 在图层 1 和 2 上方，基于预测降雨量，叠加展示可能触发的风险事件的数量
- 在行政区中心上方，以半透明圆形染色区来代表风险事件数量
- 数量越多，圆形色块的面积越大，颜色越深
- 显示上引入动画效果：以一种风险从无到有的态势反复播放
- 对于选中的"市/区"，需要在染色区中心显示事件数量
- 当用户选择查看"预测降雨量"时，默认加载该图层

**图层特性**

- 各个图层的颜色不同
- 可以在地图上手动切换选中"市/区"所属"省/州"内的其他"市/区"

#### 图层展示控制

- 提供 heatmap 图层开关，点击后显示可以开启/关闭的图层
- 当选择的数据类型是历史数据，则仅"historical rainfall"可以操作，点击切换开启/关闭
- 当选择的数据类型是预测数据，则仅"predicted rainfall"可以操作，点击切换开启/关闭
- UI 层面，设计参考 Google Map

#### 地图输入方式

两种输入方式只能激活一种。当一种激活时，最小化另一种。

**手动选择**

1. **区域选择**
   - 模糊搜索
   - 按层级分步选择"国家 - 省/州 - 市/区"（支持全球范围）

2. **选择数据类型**
   - "历史降雨量"或"预测降雨量"，二选一
   - 若选择的是"历史降雨量"，则需要设定时间窗口，明确起止日期和时刻（整数的小时，24 小时制）
     - 默认时间窗口为"当前日期 1 小时前"至"过去 7 天的相同时刻"
     - 限制：日期最多选择 40 天内的
   - 若选择的是"预测降雨量"，则设定默认事件窗口为"当前日期和时刻"至"未来 10 天的相同时刻"（整数的小时，24 小时制）

3. **选择需要叠加的保险产品卡片**
   - 仅能选中一个，可切换
   - 产品卡片涵盖图标和文字描述
   - 点击"more"可跳转到保险产品介绍页

4. **UI 设计**
   - 参考 Google Map，overlay 于地图最上层（不超出地图边界），尽量简洁

**对话框输入**

- 基于 Google Contextual View 的对话框
- 对话框采集的用户需求传入各个选项卡（行政区域、数据类型、时间范围、叠加的保险产品），并影响各部分的信息呈现
- UI 布局方面，overlay 于地图最上层（不超出地图边界）
- 展开时，置于地图右侧，1/4 宽度

**默认设置**

首次进入网站时，默认设定区域为印尼雅加达的一个"市/区"，默认选择历史降雨量，默认时间窗口，不叠加任何保险产品。默认展开对话框。

### 第二部分：降雨数据和风险事件

该部分的信息基于第一部分的输入（指定的"市/区"、数据类型、时间窗口、叠加的保险产品），展示相应地从 Google API 获取的数据和图表，以及根据预定逻辑计算的数据和图表。

#### 分析汇总

- 以卡片的形式，量化指标：
  - 时间窗口（天数 + 小时）
  - 窗口期内的平均降雨量
  - 窗口期内的总降雨量
  - 窗口期内的，选择产品的风险事件数量
  - 风险的严重程度
- 对于平均降雨量：
  - 若是日内产品，则统计并展示 avg. hourly rainfall
  - 若是周内或月度产品，则统计并展示 avg. daily rainfall

#### 降雨量柱状图

- 默认按天展示，可手动切换为按小时展示
- 当选择 daily product 时，自动切换到 hourly view
- 当选择 weekly product 或 monthly drought product 时，自动切换到 daily view

#### 降雨量和风险的叠加示意图

仅在指定了保险产品后，根据选定的保险产品类型展示相应的图。

**日内产品**

- 以 hourly view 的柱状图为底
- 每根柱的值为"包含当前小时和此前连续 3 小时的降雨量累计值"
- 主图上叠加阈值线
- 若某根柱的值超过阈值线，则特殊显示

**周内产品**

- 以 daily view 的柱状图为底
- 每根柱的值为"包含当天和此前连续 6 天的降雨量累计值"
- 主图上叠加阈值线
- 若某根柱的值超过阈值线，则特殊显示

**月内产品**

- 以 daily view 的面积图为底
- 以每日降雨量为上沿线
- 以一个完整自然月的降雨量累计值计算和显示面积
- 若某月的累计值超过阈值，则特殊显示

#### 风险事件的触发情况

仅在指定了保险产品后，按时间线呈现：那一月/哪一天/哪一小时，什么级别，触发类型等。

## 产品介绍页设计

### 目标

- 图文并茂的介绍什么是 index insurance，与传统保险的区别
- 图文并茂的介绍不同的保险产品
- 整体风格新颖好看

### 页面形式

总-分的结构。

### 保险产品

**重要说明**：保险产品涵盖两层定义：
1. **产品级的风险事件触发条件**：定义什么情况触发风险事件，触发风险的级别（tier 1, tier 2, tier 3）
2. **保单级的赔付原则**：定义赔付多少金额，赔付几次（如"once per day per policy"、"对应不同理赔额度"）

**当前网站范围**：目前该网站仅计算并可视化产品级的风险事件触发条件，不涉及保单级的赔付计算。产品详情页中的保单级信息（如"once per day per policy"、"对应不同理赔额度"）仅用于教育展示，不参与实际计算。

#### 降雨量日内产品

*产品级的风险事件触发条件*：
- 天气类型：降雨量
- 触发条件：连续 4 小时的降雨量超过阈值（时间区间：00:00 to 23:59）
- 阈值 threshold 分 3 档：
  - 100mm (tier 1)
  - 120mm (tier 2)
  - 140mm (tier 3)
- 触发级别：根据超过的阈值档位确定（tier 1, tier 2, tier 3）

*保单级的赔付原则*（仅用于教育展示，不参与计算）：
- 赔付频率限制：once per day per policy（每天每个保单最多赔付一次）
- 理赔额度：对应不同理赔额度（根据 tier 1/2/3 不同档位）

#### 降雨量周度产品

*产品级的风险事件触发条件*：
- 天气类型：降雨量
- 触发条件：7 天累计降雨量超过阈值
- 阈值 threshold 分 3 档：
  - 300mm (tier 1)
  - 350mm (tier 2)
  - 400mm (tier 3)
- 触发级别：根据超过的阈值档位确定（tier 1, tier 2, tier 3）

*保单级的赔付原则*（仅用于教育展示，不参与计算）：
- 赔付频率限制：once per month per policy（每月每个保单最多赔付一次）
- 理赔额度：对应不同理赔额度（根据 tier 1/2/3 不同档位）

#### 降雨量月度产品

*产品级的风险事件触发条件*：
- 天气类型：降雨量
- 触发条件：当月累计降雨量低于阈值
- 阈值 threshold 分 3 档：
  - 60mm (tier 1)
  - 40mm (tier 2)
  - 20mm (tier 3)
- 触发级别：根据低于的阈值档位确定（tier 1, tier 2, tier 3）

*保单级的赔付原则*（仅用于教育展示，不参与计算）：
- 理赔额度：对应不同理赔额度（根据 tier 1/2/3 不同档位）

### 页面联动

可以通过"Simulate risk"跳转到首页查看指定产品的实际运行情况（设定默认参数，叠加该保险）。
