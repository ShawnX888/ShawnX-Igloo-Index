# v2 页面设计提案（数据大屏 / 科技感态势感知）

> 阶段：头脑风暴（不考虑后端与数据可得性）  
> 目标：在 **地图 + 数据面板** 的联动框架下，清晰呈现「省级全局保单/理赔态势（背书 + Top 导航）」与「所选区域理赔趋势&风险关联」，同时让页面更“像一张会呼吸的指挥中心”。

---

## 0. 设计北极星（North Star）

用户打开页面后 10 秒内应做到：

- **一眼看到态势**：当前省份的保单与理赔分布（热力/分级）+ Top 导航，知道“哪里最活跃 / 哪里风险最高 / 哪里赔得最多”。
- **一键下钻到细节**：点击任意区域后，能在「区域情报面板（Region Intelligence Panel）」中快速看到该区域的概览、趋势、与风险事件/理赔的时间对齐关联。
- **可解释性强**：所有关键数字都能回答“为什么”（有对比、有时间轴、有阈值/事件标记）。

---

## 1. 信息分层（让内容层次分明）

把信息拆成 3 个层级（强制分区，避免“所有东西都堆在同一张图里”）：

- **L0 省级态势（全局）**：保单 / 理赔 KPI + 排名  
  - 回答：**这一个省整体如何？排名如何？变化方向如何？**
- **L1 区域态势（选中区域）**：概览 + 天气趋势 + 风险事件趋势 + 理赔趋势 + 相关性分析  
  - 回答：**这个区为什么突出？什么时候开始异常？与风险是否相关？**
- **L2 证据链（Details/明细：解释与溯源）**：可点击的明细列表/事件时间线/对比面板  
  - 回答：**给我证据：哪些理赔、对应哪些风险、触发了什么规则？**

将“时间”作为横向维度贯穿 L0/L1/L2：**同一条时间轴，不同层级同步刷选**。

---

## 2. 推荐主布局：地图主舞台 + 左侧 L0 HUD Rail + 区域情报面板（路演友好）

结论：本页面更偏“产品路演大屏”，叙事主角是 **动态天气地图 + 风控可解释 + AI Agent 服务**。因此需要：

- **弱 BI（少数字）**：省级态势只做“背书”，不抢舞台
- **强解释性（强可视化）**：风险 ↔ 理赔在同一时间轴被解释，并可下钻到明细证据（L2）
- **渐进式披露**：默认简洁，按需展开细节

### 2.1 信息架构图（IA：组件分区 + 层级映射）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ Top Bar（轻量）                                                              │
│ - Brand + One-liner Value Prop                                               │
│ - Global Time Range / Data Type (historical|predicted)                        │
│ - Weather Type Selector (降雨/风/...) + Layer Toggles (天气/风险/理赔)   │
│ - AI Status (ready/thinking) + Entry                                         │
└─────────────────────────────────────────────────────────────────────────────┘
┌───────────────────────────────┬─────────────────────────────────────────────┐
│ Left HUD Rail（L0：省级态势 HUD，非侧栏）│ Map Stage（主舞台：80%注意力）         │
│ - Placement: under Search Box, left-aligned                                  │
│ - Shape: top wide → bottom narrow（与左侧/底部视觉节奏对齐）                   │
│ - Default: HUD 形态（不做“独立页面侧栏”）                                     │
│                                                                               │
│ [AI Insight ★（不可收起）]                                                    │
│ - Humanized copy + auto-rotate（ticker / carousel）                           │
│ - Click → pin + highlight + open Region Panel to Half（定位到目标 section）   │
│                                                                               │
│ [Group A（可收起）: KPI Strip + Pareto Top3]                                  │
│ - KPI Strip（2 items, province-level）: Total Premium / Total Claims Amount   │
│ - Pareto Top3（dual bars）：Claim Amount（排序主键） + Premium Amount（并列） │
│ - Click Top3 row → map fly-to + lock district（不自动打开 Region Panel）      │
│                                                                               │
│ [Group B（可收起）: Claim Trend Sparkline]                                    │
│ - Sparkline only（轻量趋势提示 + delta）；不承载完整趋势阅读任务               │
│ - Click（可选）→ open Region Panel / Timeline（显式入口，非自动）             │
└───────────────────────────────┴─────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────────────────────┐
│ Region Intelligence Panel（区域情报面板，L1/L2 Bottom Sheet）                   │
│ - Default: Collapsed / Peek                                                  │
│ - Snap Points: Peek(20%) → Half(45%) → Full(80~90%)                           │
│ - Sticky Section Nav: Overview | Timeline | Correlation | Details             │
│ - Scrollable Content                                                         │
└─────────────────────────────────────────────────────────────────────────────┘

L0 = Left HUD Rail（省级背书：AI Insight（亮点）+ KPI Strip + Pareto Top3 + Sparkline；强调“HUD 化”与可收起）  
L1/L2 = Region Intelligence Panel（区域情报面板：概览 + 统一时间轴 + 关联 + 明细）  
```

### 2.2 状态机（默认态 → 下钻态，便于 Agent 实现联动）

```
[S0 初始]
- Left HUD Rail: visible under Search Box
- - AI Insight: auto-rotate
- - Group A/B: expanded by default（可被用户手动收起）
- Map: Weather + Risk (minimal HUD)
- Region Intelligence Panel: Collapsed/Peek

  | (Map click lock region OR Pareto Top3 click)
  v
[S1 区域锁定]
- Map: lock region + highlight
- Left HUD Rail: highlight selected district; AI Insight rotates contextually（可选）
- Region Intelligence Panel: still Collapsed/Peek (避免打断路演节奏)

  | (Insight click / CTA)
  v
[S2 情报面板打开]
- Region Intelligence Panel: open to Half + auto-scroll to target section
- Timeline shows aligned lanes (Weather / Risk / Claims)

  | (Drag to Full)
  v
[S3 分析模式]
- Region Intelligence Panel: Full (with sticky nav)
- Optional: show mini-map/breadcrumb to keep spatial context
```

### 2.3 关键交互（让联动“可预期且不打扰”）

- **地图 Hover（轻交互）**：边界高亮 + mini tooltip（最多 3 个数）。不自动展开底部面板。
- **地图 Click（锁定）**：锁定选区；Left HUD Rail 高亮选中 district（含 Pareto 行选中态）；AI Insight 可按上下文轮动（节流）；底部仍保持收起/peek（保持地图主舞台）。
- **Pareto Top3 Click（反向驱动）**：点击 Top3 任一行 → 地图 fly-to + 锁定 district（榜单即导航）；**不自动展开**区域情报面板。
- **AI Insight Click（显式下钻）**：点击 AI Insight → Insight pin + highlight；区域情报面板升起到 Half，并自动定位到目标小节（默认 Timeline，可被 CTA 指定）。
- **时间轴 Brush（全局过滤）**：刷选时间范围后，L0/L1/L2 同步更新；AI Insight 重新生成/轮动（但节流，避免频繁跳动）。
- **天气类型切换（Weather Type Toggle）**：切换天气类型（降雨/风/...）后，地图可视化图层更新；产品选择器自动过滤（只显示支持当前天气类型的产品）；Left HUD Rail 的 KPI/Pareto 口径可能变化（若按天气类型区分）；区域情报面板的 Timeline 中 Weather/Risk 泳道同步更新。
- **Compare（可选）**：钉住 baseline 区域，再选另一区域对比（只影响底部面板与少量 KPI，不污染地图）。

### 2.4 联动矩阵表（Trigger → Components）

> 目的：给其他 Agent 直接当“联动规格书”用。  
> 约定：「区域情报面板（Region Intelligence Panel）」的目标小节通过 `Overview | Timeline | Correlation | Details` 进行定位；“不自动展开”表示保持当前 snap point。  
> 约定：省级 Top 导航以 Pareto Top3 的形式存在（按 claim amount 排序；dual bars 并列展示 claim/premium）。

| Trigger（用户动作/系统事件） | Map Stage（地图主舞台） | Left HUD Rail（L0 HUD） | AI Insight（ticker） | Region Intelligence Panel（L1/L2） |
|---|---|---|---|---|
| Map Hover（轻） | 高亮 hover 区域边界；显示 mini tooltip（≤3 指标） | 不变 | 不变 | 不变（不自动展开） |
| Map Click Lock（重） | Fly-to（可选）+ 锁定选区；高亮边界；更新图例/阈值提示（如需） | Left HUD Rail：高亮选区；KPI/Top3 在必要时进入“指示态”（不挤占主舞台） | Insight 可按选区上下文轮动（节流） | 保持 Collapsed/Peek（默认不打断） |
| Pareto Top3 Click（导航） | Fly-to + 锁定 district（同 Map Click Lock） | Left HUD Rail：高亮该行（排序主键为 claim amount） | 可选择性刷新（节流） | **不自动展开**（保持 Collapsed/Peek） |
| HUD Group Collapse Toggle（A/B） | 不变 | 收起/展开 Group A（KPI+Pareto）或 Group B（Sparkline）→ 对应为小图标 | 不变（AI Insight 不可收起） | 不变 |
| Global Time Range Change（顶栏） | 若地图图层与时间相关：刷新可视化（保持锁定区域不丢） | L0 KPI/趋势更新 | 刷新（节流） | 若已打开：Timeline 自动对齐新范围；若收起：不弹起 |
| Timeline Brush（底部） | 地图图层若支持时间过滤：同步过滤（可选） | L0 趋势与排名口径同步变化（可选：显示“已过滤”tag） | 刷新（节流） | Timeline 缩放到刷选区间；高亮刷选窗口 |
| Weather Type Toggle（降雨/风/...） | 切换天气可视化图层（降雨→风等）；更新 legend/单位 | 若 KPI/排名按天气类型区分：更新口径；否则不变 | 刷新（节流，因产品/天气类型变化） | Timeline 中 Weather/Risk 泳道更新；若已打开：自动刷新；若收起：不弹起 |
| Layer Toggle（风险/理赔/阈值/热力） | 切换/叠加图层；更新 legend | 可显示“当前图层 preset”状态（轻提示） | 不变（除非洞察依赖图层） | 不变 |
| Product Selector Update（产品选择器，随天气类型自动过滤） | 地图上产品选择器浮层：更新可选产品列表（只显示支持当前天气类型的产品） | 不变 | 若当前选中产品不支持新天气类型：清空选中状态；否则不变 | 若已打开且选中产品：Timeline 的 Risk 泳道更新（阈值/规则变化） |
| AI Insight Click（显式下钻） | 保持当前视野（不跳走）；可对选区做一次强调描边 | 不变（或轻提示“已进入区域情报面板”） | **Insight pin + highlight** | **打开到 Half**；定位到 `Timeline`（默认）或指定小节 |
| Insight CTA: Show on timeline | 不变（或高亮相关事件区域） | 不变 | 当前 Insight 进入 loading→done | 打开到 Half（如未开）；定位到 `Timeline` 并高亮对应事件 |
| Insight CTA: Overlay thresholds | **叠加阈值带/规则提示层**；legend 更新 | 不变 | 当前卡执行态 | 不变（或保持当前） |
| Insight CTA: Compare to province | 可选：地图进入对比配色/对比图层 | L0 显示“该区 vs 省均值” delta（轻量） | 当前卡执行态 | 打开到 Half；定位到 `Correlation`（默认折叠但此 CTA 主动展开） |
| Insight CTA: Open details | 可选：地图高亮对应事件/理赔点 | 不变 | 当前卡执行态 | 打开到 Full（或 Half）；定位到 `Details` 并滚到目标条目 |
| Panel Drag（Peek/Half/Full） | Peek/Half 保持地图可见；Full 可选显示 mini-map/breadcrumb | 不变 | 不变 | 改变 snap point；启用 sticky nav |
| Bottom Details Row Click（明细点击） | 地图高亮对应位置/区域；必要时 fly-to | 左侧可选高亮该条目相关区县 | 不变 | 保持打开；在 Details 中标记 selected row |
| Close Panel | 地图回到主舞台（无额外变化） | 不变 | 不变 | 收起到 Peek/Collapsed |

---

### 2.5 权限与“模式”（先设计，后实现）

> 结论：需要提前纳入设计，但不必立刻做重型权限系统。  
> 将权限视为 **信息密度与操作能力的分级开关**（View Modes / Feature Flags），同一套 IA 不推倒重来。

#### 2.5.1 为什么必须提前考虑（适配路演与多受众）

- **受众差异**：终端客户 / 合作伙伴 / 投资人 / 内部运营对“数据粒度、敏感口径、可操作能力”的需求完全不同。
- **当前 IA 存在天然权限断点**：L0 排名的数值粒度、Region Intelligence Panel 的 Details（明细溯源）、Compare/导出/分享等能力并不适合对所有人开放。

#### 2.5.2 模式定义（建议三档，覆盖绝大多数场景）

- **Demo/Public（路演默认）**：少数字、强可视化、强解释；明细与敏感口径做“脱敏/聚合/隐藏”
- **Partner（保司/渠道/合作伙伴）**：开放更深的省级排名、更多 KPI 与对比；明细仍可字段级脱敏
- **Admin/Internal（内部）**：开放全量（含明细、导出、配置、对比等）

#### 2.5.3 模式矩阵（Mode → 可见/可用/默认展开）

| 模块/能力 | Demo/Public（默认） | Partner | Admin/Internal |
|---|---|---|---|
| **Top Bar：Weather Type Selector** | ✅（限制 1–2 种，如降雨/风） | ✅（更多类型） | ✅（全量） |
| **Top Bar：Layer Toggles** | ✅（天气/风险/理赔，基础开关） | ✅（更多叠加项） | ✅（全量） |
| **Map Stage：地图主舞台** | ✅（重点展示动态天气 + 风险解释） | ✅ | ✅ |
| **Map Stage：Claims Overlay** | ⚠️ 可选（建议聚合/弱化金额，避免敏感） | ✅（可更细） | ✅（可到细粒度） |
| **Product Selector（随天气类型变化）** | ✅（限制产品数量，保证路演节奏） | ✅（更全） | ✅（全量） |
| **Left HUD Rail：L0 KPI（省级背书）** | ✅（只给“背书级”金额 KPI，可范围化） | ✅（更完整口径） | ✅（全量口径） |
| **Left HUD Rail：Pareto Top3（导航）** | ⚠️ 可选（可隐藏精确金额，仅保留强弱/区间） | ✅（显示数值） | ✅（显示数值） |
| **AI Insight（ticker + pin）** | ✅（强推荐：导演提示） | ✅ | ✅ |
| **Region Intelligence Panel：Overview/Timeline/Correlation** | ✅（默认展开 Overview + Timeline） | ✅ | ✅ |
| **Region Intelligence Panel：Details（明细溯源）** | ⚠️ 默认隐藏或脱敏（聚合到“1 风险 → 多理赔”摘要） | ✅（字段级脱敏可选） | ✅（全量明细） |
| **Compare（对比模式）** | ❌（可隐藏，避免复杂） | ✅ | ✅ |
| **导出/分享/保存视图** | ❌ | ✅（按权限） | ✅ |

#### 2.5.4 交互降级规则（避免“权限不足导致断流”）

- **被禁用的能力要“可见但不可用”**（展示 lock + tooltip），而不是直接消失（否则路演/演示口径难统一）。
- **Details 被限制时**：CTA 仍可引导到 Timeline/Correlation（保持解释闭环），但 Details 内容以“聚合摘要/脱敏字段”呈现。
- **产品/天气类型被限制时**：Product Selector 以推荐集呈现（1–3 个），避免用户在路演时迷失。

## 3. 三类新增信息如何“放得漂亮”

对应你提出的 3 个需求，我建议这样组织视觉与交互：

### 3.1 省级保单统计与导航（L0：Left HUD Rail）

- **省级 KPI（金额，2 个）**：**Total Premium（总保费金额）**、**Total Claims Amount（总理赔金额）**  
- **Top 导航（Pareto Top3）**：每行 district 使用 **dual bars** 并列展示 `claim amount + premium amount`，并以 **claim amount** 作为排序主键  
  - 交互：Click 行 → Map fly-to + lock district（榜单即导航）；默认不自动展开区域情报面板

> 设计语言：左侧像“态势播报台”——数字大、结构紧、层级强。

### 3.2 省级理赔态势（L0：Left HUD Rail）

与保单背书一致：强调“用最少信息给足态势”，避免把 L0 做成读报表。

- **KPI（金额）**：省级理赔只强调 **Total Claims Amount**（与 Total Premium 并列构成背书闭环）
- **导航（Pareto Top3）**：以 claim amount 排序，并列展示 premium amount（同 3.1）
- **趋势（轻量）**：仅保留 claim amount 的 **sparkline（趋势提示）**，不在 L0 承载完整趋势阅读任务

> 视觉强调：理赔相关用“告警色系”（红/橙）但**不靠颜色单独表达**，始终配 icon 与文字（可访问性规则）。

### 3.3 所选区域的“风险 + 理赔”一体化事件链（L1/L2：区域情报面板内容）

将风险详情与理赔详情合并为同一条 **Event Chain（事件链）**，遵循从上到下：**概览 → 统一时间轴 → 关联 → 明细**。

- **Overview（概览 KPI）**：风险触发次数/ 所有tier、理赔件数、理赔金额、理赔率（少而强，适合路演）
- **Timeline（核心）**：同一时间轴的三泳道对齐（Weather / Risk / Claims）  
  - **Weather**：根据当前天气类型展示对应可视化（如降雨→precipitation 柱状图；风→风速/风向等）  
  - **Risk**：根据当前天气类型与所选产品，展示 **rolling sum 折线** 或 **累积折线**；叠加阈值线；曲线图的染色区分不同阈值区间（增强“触发可解释性”）  
  - **Claims**：点状图（scatter）；纵坐标为**理赔额**；不展示理赔单状态（避免信息噪音与口径争议）  
  - 说明：切换天气类型后，Weather/Risk 泳道自动更新；若当前选中产品不支持新天气类型，Risk 泳道显示“无可用产品”提示
- **Correlation（吸睛但可控，默认折叠）**：散点图（**理赔金额 vs 风险强度**）
- **Details（明细溯源，默认折叠）**：按时间倒序列出“**风险事件 ↔ 理赔信息（1 风险，多理赔） ↔ 产品规则提示**”  
  - 交互：点击条目 **回指 Timeline**（滚动/定位到对应时刻），并对该风险时刻做高亮标记

### 3.4 AI Insight（放在 Search 下方：导演提示，而非聊天回答）

定位：AI Insight 不是长对话，而是 **人性化的一句话结论 + 可执行动作**（Director Cues），帮助路演“按剧本走”。

- **出现位置**：Left HUD Rail（Search box 下方的第一优先区，始终可见、不可收起）
- **展示形态**：ticker / carousel（自动轮动；用户点击后可 pin + highlight）
- **触发时机**：区域锁定 / 时间范围变化 / 产品变化（节流，避免频繁闪烁）
- **点击效果（必须“操控 UI”）**：点击某条 Insight → pin + highlight；打开区域情报面板到 Half 并定位到目标小节（默认 Timeline；也可由 CTA 指定）

---

## 4. 科技感视觉系统（不土、不花、但很抓人）

基于 UI/UX 素材库（Dark Mode OLED + Glassmorphism + Financial Dashboard + Bento Grid）的组合建议：

### 4.1 色彩（推荐：深色底 + 可信蓝 + 霓虹点缀）

- **背景**：#0F172A（深海军蓝，稳定且专业）
- **文字**：#F8FAFC（高对比白）
- **边框**：#334155（低调分隔）
- **主色（可信/交互）**：#3B82F6（蓝）
- **强调 CTA**：#8B5CF6（紫）或 #F59E0B（琥珀）
- **风险/告警**：tier1=amber、tier2=orange、tier3=red（并配 icon/标签）

关键规则：

- **卡片是玻璃层**：背景半透明 + 10–20px blur + 细边框（“雾化玻璃”），而不是厚重阴影。
- **可读性优先**：正文/数字对比度至少 **4.5:1**，灰字不要压到看不清。

### 4.2 字体（更“仪表盘”）

两套可选：

- **Tech Startup（更现代、更科技）**：Space Grotesk（标题） + DM Sans（正文）
- **Dashboard Data（更工程、更数据）**：Fira Code（数字/标签） + Fira Sans（正文）

建议：数字与关键指标用等宽或半等宽风格，瞬间“数据感拉满”。

### 4.3 组件质感（让页面“像系统”）

- **Bento Grid**：卡片大小不完全等高，做出“拼贴式大屏”，更像指挥中心。
- **数字动效**：KPI 上使用轻量 count-up（200–400ms），配“涨跌箭头/Delta”。
- **微光效**：只在“当前选中/告警/可交互元素”出现轻微 glow，避免全屏霓虹导致廉价。
- **地图舞台**：地图上保留干净的舞台边缘（8–12px 内边距）+ 角落 HUD 控件（图层、图例、定位、模式）。

### 4.4 动效节奏（吸引眼球但不打扰）

- **Hover 高亮**：边界描边 + 轻微外发光（不改变布局）
- **Click 锁定**：地图飞行（800–1200ms）+ Left HUD Rail 高亮选区 + AI Insight 状态更新（轮动/锁定）（保持地图是主舞台）
- **时间轴刷选**：图表区域“缩放动画” + Loading skeleton（避免突变）
- **展开区域情报面板**：从底部升起（Peek→Half→Full），并对目标小节做一次轻量高亮
- 尊重 **prefers-reduced-motion**（降低眩晕风险）

---

## 5. 参考网站（找灵感用）

这些都属于“地图 + 多图层 + 时间/数据联动”的强参考，适合对齐你想要的科技感与吸睛程度：

- **Windy（天气态势大屏标杆）**：层级清晰的图层系统 + 强动效粒子 + 高密度信息控制  
  - 链接：[`https://www.windy.com`](https://www.windy.com)
- **earth.nullschool（全球风场/气象可视化）**：极简 UI + 极强“科技感数据场”  
  - 链接：[`https://earth.nullschool.net`](https://earth.nullschool.net)
- **kepler.gl Demo（时间轴/刷选/空间过滤）**：时间滑块与地图联动的交互范式  
  - 链接：[`https://kepler.gl/demo`](https://kepler.gl/demo)
- **deck.gl Gallery（高性能图层与动效灵感）**：Heatmap/Trips/Arc 等动态图层表现  
  - 链接：[`https://deck.gl/gallery`](https://deck.gl/gallery)
- **ArcGIS Dashboards（地图+KPI+排名的成熟范式）**：指标、排名、地图联动“很企业但很稳”  
  - 链接：[`https://www.esri.com/en-us/arcgis/products/arcgis-dashboards/overview`](https://www.esri.com/en-us/arcgis/products/arcgis-dashboards/overview)
- **Map UI Patterns（地图交互模式库）**：Info Panel / Extent-driven content 等成熟模式  
  - 链接：[`https://mapuipatterns.com`](https://mapuipatterns.com)
- **Flightradar24（地图 + 列表/抽屉/详情的强交互）**：非常适合参考“榜单反向驱动地图”的联动  
  - 链接：[`https://www.flightradar24.com`](https://www.flightradar24.com)
- **MarineTraffic（航运指挥中心风格）**：地图+态势+列表+详情抽屉  
  - 链接：[`https://www.marinetraffic.com`](https://www.marinetraffic.com)
- **Felt（协作 GIS + 图层+标注）**：现代 GIS 的产品感与图层交互  
  - 链接：[`https://felt.com`](https://felt.com)

---

## 6. 下一步（如果你要继续推进）

不细化实现的前提下，我建议下一轮只做 3 件事：

- **确认默认态**：Left HUD Rail 位于 Search 下方（上宽下窄）；AI Insight 常驻轮动；Group A/B 可手动收起；区域情报面板收起/peek；地图是主舞台。
- **确定 L0 “最小背书 + 导航”**：KPI Strip（2 个金额：Total Premium / Total Claims Amount）+ Pareto Top3（dual bars，按 claim amount 排序）+ claim sparkline（趋势提示）。
- **确定最小闭环**：Pareto Top3 click 只负责 map fly-to + lock（不自动开面板）；AI Insight click/CTA 才负责打开区域情报面板到 Half 并定位（Timeline 默认展开；Correlation/Details 默认折叠）。

